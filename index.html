<!DOCTYPE html>
<html>
<head>
    <title>Video Call</title>
    <style>
        body { margin: 20px; font-family: Arial; }
        video { width: 100%; max-width: 600px; border: 2px solid #333; }
        button { padding: 10px 20px; margin: 5px; }
    </style>
</head>
<body>
    <h1>Video Call</h1>
    
    <div>
        <video id="localVideo" autoplay muted></video>
    </div>
    
    <div>
        <button onclick="startCall()">Start Call</button>
        <button onclick="endCall()">End Call</button>
    </div>
    
    <script>
        // Hardcoded LiveKit URL
        const LIVEKIT_URL = 'wss://video-20qatdd3.livekit.cloud';
        
        // Get room from URL
        const urlParams = new URLSearchParams(window.location.search);
        const roomName = urlParams.get('room') || 'test-room';
        
        let localStream;
        
        async function startCall() {
            try {
                // Get camera and microphone
                localStream = await navigator.mediaDevices.getUserMedia({
                    video: true,
                    audio: true
                });
                
                // Show local video
                const localVideo = document.getElementById('localVideo');
                localVideo.srcObject = localStream;
                
                alert('Camera/mic started! Room: ' + roomName);
                console.log('LiveKit URL:', LIVEKIT_URL);
                console.log('Room:', roomName);
                
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }
        
        function endCall() {
            if (localStream) {
                localStream.getTracks().forEach(track => track.stop());
                document.getElementById('localVideo').srcObject = null;
                alert('Call ended');
            }
        }
        
        // Auto-start for testing
        // startCall();
    </script>
</body>
</html>
