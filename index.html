<!DOCTYPE html>
<html>
<head>
    <title>Video Call</title>
    <style>
        body { margin: 20px; font-family: Arial; background: #667eea; color: white; }
        video { width: 100%; max-width: 600px; border: 3px solid white; }
        button { padding: 15px 30px; margin: 10px; background: white; color: #667eea; }
        #status { padding: 15px; margin: 20px; background: rgba(255,255,255,0.2); }
    </style>
</head>
<body>
    <h1>üé• Video Call</h1>
    <div id="status">Loading...</div>
    <video id="localVideo" autoplay muted playsinline></video>
    <div>
        <button onclick="startCamera()">Start Camera</button>
        <button onclick="stopCamera()">Stop Camera</button>
    </div>
    
    <script>
        // Get URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const roomName = urlParams.get('room');
        const token = urlParams.get('token');
        
        const statusEl = document.getElementById('status');
        const localVideo = document.getElementById('localVideo');
        
        // Update status
        if (roomName && token) {
            statusEl.innerHTML = `‚úÖ Room: ${roomName}<br>‚úÖ Token: ${token}`;
            statusEl.style.background = '#4CAF50';
        } else {
            statusEl.innerHTML = '‚ùå Missing parameters';
            statusEl.style.background = '#f44336';
        }
        
        // Camera functions
        async function startCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: true,
                    audio: true
                });
                localVideo.srcObject = stream;
                statusEl.innerHTML += '<br>üìπ Camera started!';
            } catch (error) {
                statusEl.innerHTML += '<br>‚ùå Camera error: ' + error.message;
            }
        }
        
        function stopCamera() {
            if (localVideo.srcObject) {
                localVideo.srcObject.getTracks().forEach(track => track.stop());
                localVideo.srcObject = null;
                statusEl.innerHTML += '<br>‚èπÔ∏è Camera stopped';
            }
        }
        
        // Auto-start
        window.addEventListener('load', () => {
            if (roomName && token) {
                setTimeout(startCamera, 1000);
            }
        });
    </script>
</body>
</html>
